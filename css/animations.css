
/* --- THE GRAND ANIMATION LOOP (20s) --- */

:root {
    --loop-duration: 20s;
}

.animation-stage * {
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
    animation-duration: var(--loop-duration);
}

/* 1. CURSOR MOVEMENT (Calculated positions) */
@keyframes cursor-path {
    0%      { top: 110%; left: 110%; opacity: 1; }
    5%      { top: 60%; left: 60%; }
    
    /* STEP 1: Click 'Connect' on profile (approx top left-ish) */
    10%     { top: 250px; left: 80px; transform: scale(1); animation-timing-function: ease-out; }
    11%     { transform: scale(0.9); }
    12%     { transform: scale(1); animation-timing-function: ease-in; }
    
    15%     { top: 300px; left: 50%; } /* Move to center, waiting for modal */
    
    /* STEP 2: Click 'Smart Draft' (top right of centered modal) */
    /* Modal is centered at 50% W, 50% H (300px). Top is approx 150px. */
    /* Button is likely around 210px down, and offset to the right. */
    25%     { top: 230px; left: calc(50% + 120px); animation-timing-function: ease-out; } 
    30%     { top: 230px; left: calc(50% + 120px); } /* Hover */
    31%     { transform: scale(0.9); } /* Click */
    32%     { transform: scale(1); animation-timing-function: ease-in; }
    
    35%     { top: 350px; left: 50%; } /* Move away while thinking */
    
    /* STEP 3: Click 'Send' (bottom right of modal) */
    /* Modal bottom is approx 450px. Send button is near there. */
    65%     { top: 370px; left: calc(50% + 150px); animation-timing-function: ease-out; }
    66%     { transform: scale(0.9); } /* Click */
    67%     { transform: scale(1); }
    
    75%     { top: 110%; left: 110%; opacity: 1; } /* Exit stage */
    100%    { top: 110%; left: 110%; opacity: 0; }
}
.mockup-cursor { animation-name: cursor-path; }

/* 2. MODAL APPEARANCE */
@keyframes modal-reveal {
    0%, 12%     { opacity: 0; transform: translate(-50%, -40%) scale(0.95); pointer-events: none; }
    15%, 66%    { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: all; }
    70%, 100%   { opacity: 0; transform: translate(-50%, -60%) scale(1.05); pointer-events: none; }
}
.mockup-modal { animation-name: modal-reveal; }

/* 3. SMART BUTTON STATES */
.injected-btn {
    position: relative;
    overflow: hidden;
    min-width: 120px;
    justify-content: center;
}
.injected-btn::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    border: 2px solid transparent;
    border-radius: 16px;
    animation: pulse-border var(--loop-duration) infinite;
}

@keyframes pulse-border {
    0%, 30% { border-color: transparent; }
    31%, 54% { border-color: var(--color-primary); opacity: 1; }
    55%, 100% { border-color: transparent; opacity: 0; }
}

.injected-btn::after {
    content: '✨ Smart Draft';
    display: block;
    animation: btn-text-states var(--loop-duration) infinite;
}
@keyframes btn-text-states {
    0%, 30%     { content: "✨ Smart Draft"; opacity: 1; }
    31%         { opacity: 0.7; }
    32%, 54%    { content: "Thinking..."; opacity: 1; }
    55%         { opacity: 0; }
    56%, 100%   { content: "✨ Smart Draft"; opacity: 1; }
}

/* 4. TYPING EFFECT */
@keyframes typing {
    0%, 35%     { width: 0; opacity: 0; }
    36%         { opacity: 1; }
    55%, 66%    { width: 100%; opacity: 1; }
    70%, 100%   { opacity: 0; }
}
.typing-text {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid var(--color-primary);
    font-family: monospace;
    font-size: 14px;
    color: var(--color-text-main);
    width: 0;
    animation-name: typing;
    animation-timing-function: steps(60, end);
}

/* 5. SUCCESS TOAST */
@keyframes toast-reveal {
    0%, 68%     { bottom: -100px; opacity: 0; transform: translateX(-50%) scale(0.9); }
    70%, 80%    { bottom: 40px; opacity: 1; transform: translateX(-50%) scale(1); }
    85%, 100%   { bottom: -100px; opacity: 0; transform: translateX(-50%) scale(0.9); }
}
.success-toast {
    position: absolute;
    bottom: -100px; left: 50%;
    transform: translateX(-50%);
    background: #059669;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    box-shadow: 0 10px 30px -10px rgba(5, 150, 105, 0.5);
    animation-name: toast-reveal;
}
